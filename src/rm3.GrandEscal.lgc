[ ********************************************************************[[ rm3.GrandEscal[[ [[ ********************************************************************[ **************************************[ LOCAL DEFINES[ **************************************#define Candle1 o1  #define Candle2 o2  #define Candle3 o3 #define Candle4 o4 #define Candle5 o5 [single candle[ **************************************[ FIRST CYCLE ONLY[ **************************************if(newRoom)    {    [ load, draw and discard the picture for the current room    load.pic(currentRoom);    draw.pic(currentRoom);    discard.pic(currentRoom);        [ the horizon defines the upper limit of ego's movement    set.horizon(1);        [ add additional room initialization here    load.view(Candles); [v100     animate.obj(Candle1);    animate.obj(Candle2);    animate.obj(Candle3);    animate.obj(Candle4);    animate.obj(Candle5);    ignore.horizon(Candle1);    ignore.horizon(Candle2);    ignore.horizon(Candle3);    ignore.horizon(Candle4);    ignore.horizon(Candle5);    set.view(Candle1,100);    set.view(Candle2,100);       set.view(Candle3,100);    set.view(Candle4,100);    set.view(Candle5,100);    set.loop(Candle1,1);    set.loop(Candle2,1);    set.loop(Candle3,1);    set.loop(Candle4,1);    set.loop(Candle5,0);    position(Candle1,24,46);    position(Candle2,11,34);    position(Candle3,12,17);    position(Candle4,22,17);    position(Candle5,20,7);    draw(Candle1);    draw(Candle2);    draw(Candle3);    draw(Candle4);    draw(Candle5);        [ load ego view, animate and draw ego    [ this is sometimes handled in logic 0    [ instead of in each individual logic    if (PreviousRoom == 28) { [avantfoyer     position(ego,155,102);     egoDir=7;     }    if (PreviousRoom == 9) { [cloakroom     position(ego,149,162);     egoDir=7;     }    if (PreviousRoom == 8) { [box office     position(ego,113,157);     egoDir=3;     }    if (PreviousRoom == 6) { [foyer middle     position(ego,3,101);     egoDir=3;     }    if (PreviousRoom == 29) { [box lodgement     position(ego,11,97);     egoDir=5;     }               draw(ego);        [ display the picture on screen    show.pic();    }[ **************************************[ EVERY CYCLE[ **************************************[ add other room specific statements here[ **************************************[ PROCESS PLAYER INPUT[ **************************************if(isset(egoHitSpecial)) { if(posn(ego,8,88,21,96)) {  print("In the future you'll go up to the box lodgement");  EgoDir=5;  }      if(posn(ego,111,151,120,157)) {  print("In the future you'll enter the box office.");     }   if(posn(ego,95,155,100,161)) {  print("This way beyond the stairs lies only access to service rooms and storage. Nothing of interest will lie this way.");     egoDir=3;  }    }if (v2==Left_edge) {   [new.room(6); [Foyer middle   print("In the future you'll enter the Grand Foyer.");   egoDir=3;   }if (edgeEgoHit==Right_edge) { [get.posn(ego,egoX,egoY);  if (egoY > 120) { [in lower level  [new.room(9); [cloakroom, only in 1881!   print("In the past, you'll be able to enter the cloakroom here.");   egoDir=7;      }  else { [if in upper level   new.room(28); [ ##LE001##     }}[ if player hasn't provided input, or if a match has already[ been found no need to do said testsif((!haveInput || haveMatch))    {    goto(done);    }[ place said tests hereif(said("look"))    {    print("From here at the Grand Escalier one has access to the Grand Foyer, boxes, and the Avant-Foyer which leads to the auditorium itself.");    if (egoY < 110) { [in upper level     print("There are further doors on the lower level.");     }    else { [in lower level     print("There is a cloakroom door to the far right of the area, and a sign at an archway closer to the stairs.");     }}if(said("look","sign")) { if (egoY < 110) { [upstairs  print("You're too far away.");  } else {  print("\"BILLETS\"");  }}if(said("look","stairs")) { print("The Grand Escalier is the Opera's ceremonial staircase, and is lit by a group of alluring female torchŠres - statues holding lights. It gives access to different levels of the social heart of the opera house.") ; }:donereturn();[ **************************************[ MESSAGES[ **************************************#message 1 "You see nothing of interest." 